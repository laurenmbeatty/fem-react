{"version":3,"sources":["Carousel.js","Modal.tsx","Details.js"],"names":["Carousel","state","photos","active","handleIndexClick","event","setState","target","dataset","index","value","map","photo","media","filter","React","Component","loading","LoadableContent","loader","petfinder","key","secret","Details","showModal","toggleModal","pet","get","output","id","props","then","data","breed","Array","isArray","breeds","join","name","animal","location","contact","city","description","catch"],"mappings":"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","file":"Details.180b8e97.map","sourceRoot":"../src","sourcesContent":["import React from \"react\";\n\nclass Carousel extends React.Component {\n  state = {\n    photos: [],\n    active: 0\n  };\n\n  static getDerivedStateFromProps({ media }) {\n    let photos = [];\n    if (media && media.photos && media.photos.photo) {\n      photos = media.photos.photo.filter(photo => photo[\"@size\"] === \"pn\");\n    }\n\n    return { photos };\n  }\n  //arrow function refers to whatever lexical scope it's defined!!!  Yes!  if I wrote it as a normal function, we'd have\n  //to bind this in the constructor\n  handleIndexClick = event => {\n    //plus sign coerces string to number\n    this.setState({\n      active: +event.target.dataset.index\n    });\n  };\n  render() {\n    const { photos, active } = this.state;\n    return (\n      <div className=\"carousel\">\n        <img src={photos[active].value} alt=\"primary animal\" />\n        <div className=\"carousel-smaller\">\n          {photos.map((photo, index) => (\n            /* eslint-disable-next-line */\n            <img\n              onClick={this.handleIndexClick}\n              data-index={index}\n              key={photo.value}\n              src={photo.value}\n              className={index === active ? \"active\" : \"\"}\n              alt=\"animal thumbnail\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Carousel;\n","// taken from React docs\nimport React from \"react\";\nimport { createPortal } from \"react-dom\";\n\nconst modalRoot = document.getElementById(\"modal\");\n\nclass Modal extends React.Component {\n  private el = document.createElement(\"div\");\n\n  public componentDidMount() {\n    if (modalRoot) {\n      modalRoot.appendChild(this.el);\n    }\n  }\n\n  public componentWillUnmount() {\n    if (modalRoot) {\n      modalRoot.removeChild(this.el);\n    }\n  }\n\n  public render() {\n    return createPortal(this.props.children, this.el);\n  }\n}\n\nexport default Modal;\n","import React from \"react\";\nimport pf from \"petfinder-client\";\nimport { navigate } from \"@reach/router\";\nimport Loadable from \"react-loadable\";\nimport Carousel from \"./Carousel\";\nimport Modal from \"./Modal\";\n\nconst loading = () => <h1>loading content...</h1>;\n\nconst LoadableContent = Loadable({\n  loader: () => import(\"./AdoptModalContent\"),\n  loading\n});\n\nconst petfinder = pf({\n  key: process.env.API_KEY,\n  secret: process.env.API_SECRET\n});\n\nclass Details extends React.Component {\n  //shortcut for constructor plus super(props)\n  state = {\n    loading: true,\n    showModal: false\n  };\n\n  toggleModal = () => {\n    this.setState({ showModal: !this.state.showModal });\n  };\n\n  componentDidMount() {\n    petfinder.pet\n      .get({\n        output: \"full\",\n        id: this.props.id\n      })\n      .then(data => {\n        const pet = data.petfinder.pet;\n        let breed;\n        if (Array.isArray(pet.breeds.breed)) {\n          breed = pet.breeds.breed.join(\", \");\n        } else {\n          breed = pet.breeds.breed;\n        }\n\n        this.setState({\n          name: pet.name,\n          animal: pet.animal,\n          location: `${pet.contact.city}, ${pet.contact.state}`,\n          description: pet.description,\n          media: pet.media,\n          breed,\n          loading: false\n        });\n      })\n      .catch(() => {\n        navigate(\"/\");\n      });\n  }\n  render() {\n    if (this.state.loading) {\n      return <h1>loading</h1>;\n    }\n    const {\n      name,\n      animal,\n      breed,\n      location,\n      description,\n      media,\n      showModal\n    } = this.state;\n\n    return (\n      <div className=\"details\">\n        <Carousel media={media} />\n        <div>\n          <h1>{name}</h1>\n          <h2>\n            {animal} - {breed} - {location}\n          </h2>\n          <button onClick={this.toggleModal}>Adopt {name}</button>\n          <p>{description}</p>\n          {showModal ? (\n            <Modal>\n              <LoadableContent toggleModal={this.toggleModal} name={name} />\n            </Modal>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Details;\n"]}